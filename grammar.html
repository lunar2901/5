<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>German Grammar Knowledge Base (A1‚ÄìC2)</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üá©üá™</text></svg>">

  <style>
    :root{
      --panel: rgba(0,0,0,.04);
      --border: rgba(0,0,0,.10);
      --muted: rgba(0,0,0,.70);
      --radius: 14px;
    }
    .grammar-shell{
      display:grid;
      grid-template-columns: 300px 1fr;
      gap: 1rem;
      align-items:start;
    }
    @media (max-width: 980px){
      .grammar-shell{ grid-template-columns: 1fr; }
      .sidebar{ position: static !important; }
    }

    .sidebar{
      position: sticky;
      top: 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: white;
      padding: 1rem;
    }
    .sidebar h3{ margin: 0 0 .75rem; }
    .muted{ color: var(--muted); }

    .pill{
      display:inline-block;
      padding:.28rem .6rem;
      border-radius: 999px;
      border:1px solid var(--border);
      margin:.2rem .25rem .2rem 0;
      font-size:.85rem;
      cursor:pointer;
      user-select:none;
      background:white;
    }
    .pill.active{
      border-color: rgba(0,0,0,.35);
      font-weight: 800;
    }

    .chip{
      display:inline-block;
      padding:.2rem .5rem;
      border-radius: 999px;
      border:1px solid var(--border);
      font-size:.78rem;
      background:white;
      margin:.15rem .25rem 0 0;
      cursor:pointer;
      user-select:none;
    }

    .topic-links{
      margin-top: .6rem;
      display:flex;
      flex-direction:column;
      gap:.35rem;
      max-height: 46vh;
      overflow:auto;
      padding-right:.25rem;
    }
    .topic-links a{
      text-decoration:none;
      padding:.35rem .5rem;
      border-radius: 10px;
      border:1px solid transparent;
      color: inherit;
    }
    .topic-links a:hover{
      background: var(--panel);
      border-color: var(--border);
    }

    .content-area{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: white;
      padding: 1rem;
    }

    .controls{
      display:flex;
      gap:.75rem;
      flex-wrap:wrap;
      align-items:center;
      padding: .75rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--panel);
      margin-bottom: 1rem;
    }
    .controls label{ font-size:.9rem; color:var(--muted); }
    .controls input[type="search"]{
      flex: 1 1 280px;
      padding:.6rem .75rem;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: white;
      outline: none;
    }
    .controls select{
      padding:.55rem .65rem;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: white;
    }
    .toggle{
      display:flex;
      align-items:center;
      gap:.45rem;
      padding:.4rem .6rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: white;
      user-select:none;
    }
    .toggle input{ transform: translateY(1px); }

    .topic-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: .85rem;
    }

    .topic-card{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: .95rem;
      background: white;
    }

    .topic-head{
      display:flex;
      justify-content:space-between;
      gap: .75rem;
      align-items:flex-start;
    }

    .topic-title{ margin:0; font-size:1.06rem; line-height:1.25; }
    .topic-meta{ display:flex; gap:.35rem; flex-wrap:wrap; justify-content:flex-end; align-items:center; }
    .tag{ display:inline-block; padding:.2rem .5rem; border-radius:999px; border:1px solid var(--border); font-size:.8rem; white-space:nowrap; }

    .topic-summary{ margin:.55rem 0 0; color: var(--muted); }

    details{
      margin-top:.75rem;
      border-top: 1px dashed var(--border);
      padding-top:.6rem;
    }
    details > summary{
      cursor:pointer;
      font-weight:800;
      list-style:none;
    }
    details > summary::-webkit-details-marker{ display:none; }

    .box{
      margin-top:.6rem;
      padding:.75rem;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--panel);
    }
    .box p{ margin:.3rem 0; }
    .box ul{ margin:.4rem 0 .2rem 1.25rem; }

    .grammar-table{
      width:100%;
      border-collapse:collapse;
      margin-top:.6rem;
      overflow:hidden;
      border-radius: 12px;
      background:white;
    }
    .grammar-table th, .grammar-table td{
      border:1px solid var(--border);
      padding:.55rem;
      vertical-align:top;
    }

    .empty-state{
      display:none;
      padding: 1.25rem;
      border: 1px dashed var(--border);
      border-radius: var(--radius);
      background: rgba(0,0,0,.02);
      color: var(--muted);
      text-align:center;
    }

    .hide-examples .examples { display:none !important; }
    .hide-deep .deep { display:none !important; }
    .hide-mistakes .mistakes { display:none !important; }
    .hide-practice .practice { display:none !important; }

    .divider{ height:1px; background: var(--border); margin:.75rem 0; }
  </style>
</head>

<body>
  <!-- Keep your existing header structure -->
  <header class="main-header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="13.33" fill="#000"/>
            <rect y="13.33" width="40" height="13.33" fill="#DD0000"/>
            <rect y="26.67" width="40" height="13.33" fill="#FFCE00"/>
          </svg>
          <h1>German Verbs</h1>
        </div>

        <nav class="main-nav">
          <a href="index.html" class="nav-link">Verbs</a>
          <a href="nouns.html" class="nav-link">Nouns</a>
          <a href="adjectives.html" class="nav-link">Adjectives</a>
          <a href="adverbs.html" class="nav-link">Adverbs</a>
          <a href="practice.html" class="nav-link">Practice</a>
          <a href="grammar.html" class="nav-link active">Grammar</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="main-content grammar-page">
    <div class="container">

      <section class="grammar-header">
        <h2>German Grammar Knowledge Base (A1‚ÄìC2)</h2>
        <p class="muted">Deep explanations, but you only expand what you need.</p>
      </section>

      <div class="grammar-shell" id="app">

        <!-- SIDEBAR -->
        <aside class="sidebar">
          <h3>Focus</h3>

          <div class="muted" style="margin-bottom:.4rem;">Level filter</div>
          <div id="levelPills">
            <span class="pill active" data-level="ALL">All</span>
            <span class="pill" data-level="A1">A1</span>
            <span class="pill" data-level="A2">A2</span>
            <span class="pill" data-level="B1">B1</span>
            <span class="pill" data-level="B2">B2</span>
            <span class="pill" data-level="C1">C1</span>
            <span class="pill" data-level="C2">C2</span>
          </div>

          <div class="divider"></div>

          <div class="muted">Topic tags (click to filter)</div>
          <div id="tagChips" style="margin-top:.35rem;"></div>

          <div class="divider"></div>

          <div class="muted">Jump to a visible topic</div>
          <div class="topic-links" id="topicLinks"></div>

          <div class="divider"></div>

          <div class="muted">
            Study path (recommended):
            <div style="margin-top:.35rem;">
              <div>1) Word order ‚Üí</div>
              <div>2) Cases ‚Üí</div>
              <div>3) Subordinate clauses ‚Üí</div>
              <div>4) Passive/Relative ‚Üí</div>
              <div>5) Konjunktiv ‚Üí</div>
              <div>6) C1/C2 style</div>
            </div>
          </div>
        </aside>

        <!-- MAIN -->
        <section class="content-area">

          <div class="controls">
            <label for="search">Search</label>
            <input id="search" type="search" placeholder="Search: dative, weil, adjective endings, passive, Konjunktiv‚Ä¶" />

            <label for="levelSelect">Level</label>
            <select id="levelSelect">
              <option value="ALL">All levels</option>
              <option value="A1">A1</option>
              <option value="A2">A2</option>
              <option value="B1">B1</option>
              <option value="B2">B2</option>
              <option value="C1">C1</option>
              <option value="C2">C2</option>
            </select>

            <label class="toggle" title="Hide examples">
              <input id="tExamples" type="checkbox" />
              Hide examples
            </label>

            <label class="toggle" title="Hide deep explanations">
              <input id="tDeep" type="checkbox" />
              Hide deep dive
            </label>

            <label class="toggle" title="Hide common mistakes">
              <input id="tMistakes" type="checkbox" />
              Hide mistakes
            </label>

            <label class="toggle" title="Hide practice prompts">
              <input id="tPractice" type="checkbox" />
              Hide practice
            </label>

            <button class="toggle" id="reset" type="button" style="cursor:pointer;">Reset</button>
          </div>

          <div class="empty-state" id="empty">No topics match your filters. Clear search or choose ‚ÄúAll‚Äù.</div>

          <div class="topic-grid" id="grid"></div>
        </section>
      </div>
    </div>
  </main>

  <footer class="main-footer">
    <div class="container">
      <p>&copy; 2026 German Verbs Learning App | Built with ‚ù§Ô∏è for language learners</p>
      <div class="footer-links">
        <a href="#" onclick="alert('Created to help learners master German grammar from A1 to C2!'); return false;">About</a>
        <a href="#" onclick="alert('Contact: support@germanverbs.app'); return false;">Contact</a>
      </div>
    </div>
  </footer>

  <script>
    // ---------- Topic Library (edit/add here) ----------
    const TOPICS = [
      // A1 / A2 Core Word Order & Cases
      {
        id: "v2-main",
        level: "A1",
        tags: ["Word order","Basics"],
        title: "Verb-Second (V2) in Main Clauses",
        summary: "In a German main clause, the conjugated verb is in position 2. Position 1 can be the subject or any other element.",
        deep: `
          <div class="box">
            <p><strong>Step-by-step rule:</strong></p>
            <ul>
              <li>Pick what you want to emphasize (time/place/object) ‚Üí put it in position 1.</li>
              <li>Put the <strong>conjugated verb</strong> in position 2.</li>
              <li>Everything else follows (objects, adverbs, etc.).</li>
            </ul>
            <p><strong>Why it matters:</strong> German uses word order (and cases) to show meaning. V2 is the ‚Äúdefault engine‚Äù of main clauses.</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich <strong>gehe</strong> heute ins Kino.</p>
            <p>Heute <strong>gehe</strong> ich ins Kino.</p>
            <p>Ins Kino <strong>gehe</strong> ich heute.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Wrong:</strong> Heute ich gehe ins Kino.</p>
            <p><strong>Right:</strong> Heute <strong>gehe</strong> ich ins Kino.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Reorder into correct German (keep meaning):</p>
            <ul>
              <li>Tomorrow / I / go / to the doctor.</li>
              <li>In the evening / we / watch / a film.</li>
            </ul>
          </div>
        `
      },

      {
        id: "questions-negation",
        level: "A1",
        tags: ["Word order","Basics"],
        title: "Questions + Negation (nicht vs kein)",
        summary: "Yes/no questions start with the verb. W-questions: question word first, verb second. Negation: nicht for verbs/phrases, kein for ‚Äòno‚Äô + noun.",
        deep: `
          <div class="box">
            <p><strong>Yes/No questions:</strong> verb in position 1 (no element before it).</p>
            <p><strong>W-questions:</strong> <em>Wann, warum, wie, wo, was, wer</em> in position 1 ‚Üí verb position 2.</p>
            <div class="divider"></div>
            <p><strong>nicht</strong> negates:</p>
            <ul>
              <li>the verb/action: Ich komme <strong>nicht</strong>.</li>
              <li>an adjective/adverb/phrase: Das ist <strong>nicht</strong> teuer. / Ich gehe <strong>nicht</strong> ins Kino.</li>
            </ul>
            <p><strong>kein</strong> negates nouns with no article (like ‚Äúnot a/any‚Äù): Ich habe <strong>kein</strong> Auto.</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p><strong>Gehst</strong> du heute ins Kino?</p>
            <p><strong>Wann</strong> gehst du ins Kino?</p>
            <p>Ich habe <strong>kein</strong> Geld.</p>
            <p>Ich habe das Geld <strong>nicht</strong>. (I do have money generally, but not <em>that</em> money.)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Wrong:</strong> Ich habe nicht Auto.</p>
            <p><strong>Right:</strong> Ich habe <strong>kein</strong> Auto.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Choose <strong>nicht</strong> or <strong>kein</strong>:</p>
            <ul>
              <li>Ich habe ____ Zeit.</li>
              <li>Das ist ____ gut.</li>
              <li>Wir gehen heute ____ schwimmen.</li>
            </ul>
          </div>
        `
      },

      {
        id: "cases-nom-akk",
        level: "A1",
        tags: ["Cases","Articles"],
        title: "Cases: Nominative & Accusative (der ‚Üí den)",
        summary: "Nominative is usually the subject. Accusative is the direct object. Masculine articles change in accusative: der ‚Üí den.",
        deep: `
          <div class="box">
            <p><strong>How to decide the case:</strong></p>
            <ul>
              <li>Ask <strong>Who does the action?</strong> ‚Üí nominative.</li>
              <li>Ask <strong>Who/what is directly affected?</strong> ‚Üí accusative.</li>
            </ul>
            <p><strong>Important:</strong> German can move elements around (V2), so you can‚Äôt rely only on position ‚Äî the articles show the role.</p>
            <table class="grammar-table">
              <tr><th></th><th>masc</th><th>fem</th><th>neut</th><th>plural</th></tr>
              <tr><td>Nominative</td><td>der</td><td>die</td><td>das</td><td>die</td></tr>
              <tr><td>Accusative</td><td><strong>den</strong></td><td>die</td><td>das</td><td>die</td></tr>
            </table>
          </div>
        `,
        examples: `
          <div class="box">
            <p><strong>Der</strong> Mann sieht <strong>den</strong> Hund.</p>
            <p><strong>Den</strong> Hund sieht <strong>der</strong> Mann. (same meaning; cases show roles)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Common confusion:</strong> mixing ‚Äúder/den‚Äù</p>
            <p><strong>Fix:</strong> highlight masculine nouns when studying; drill ‚Äúder ‚Üí den‚Äù in accusative.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Mark subject (NOM) and object (AKK):</p>
            <ul>
              <li>Den Film sieht die Frau.</li>
              <li>Der Junge besucht den Lehrer.</li>
            </ul>
          </div>
        `
      },

      {
        id: "dative",
        level: "A2",
        tags: ["Cases","Verbs"],
        title: "Dative (Wem?) + Dative Verbs + Plural -n",
        summary: "Dative marks the indirect object and is required by many verbs and prepositions. Plural dative often adds -n.",
        deep: `
          <div class="box">
            <p><strong>Core idea:</strong> dative often answers ‚Äúto/for whom?‚Äù (recipient, beneficiary).</p>
            <p><strong>Two typical patterns:</strong></p>
            <ul>
              <li><strong>geben/schenken/zeigen</strong>: NOM + verb + DAT (person) + AKK (thing)</li>
              <li><strong>dative verbs</strong>: the verb itself demands dative (helfen, danken, gefallen‚Ä¶)</li>
            </ul>
            <table class="grammar-table">
              <tr><th></th><th>masc</th><th>fem</th><th>neut</th><th>plural</th></tr>
              <tr><td>Dative</td><td>dem</td><td>der</td><td>dem</td><td>den (+n)</td></tr>
            </table>
            <p class="muted"><strong>Plural -n:</strong> mit den Kind<strong>ern</strong>, in den Wohnung<strong>en</strong> (if plural doesn‚Äôt already end in -n/-s).</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich gebe <strong>dem</strong> Mann <strong>das</strong> Buch.</p>
            <p>Ich helfe <strong>der</strong> Frau.</p>
            <p>Das Hemd <strong>gef√§llt</strong> mir.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Wrong:</strong> Ich helfe den Mann.</p>
            <p><strong>Right:</strong> Ich helfe <strong>dem</strong> Mann.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Fill in the correct article (DAT):</p>
            <ul>
              <li>Ich danke ____ Lehrer.</li>
              <li>Wir helfen ____ Kindern.</li>
            </ul>
          </div>
        `
      },

      {
        id: "prepositions-cases",
        level: "A2",
        tags: ["Prepositions","Cases"],
        title: "Prepositions + Case (Akk / Dat / Two-way)",
        summary: "Many prepositions require a fixed case. Two-way prepositions use dative for location and accusative for direction.",
        deep: `
          <div class="box">
            <p><strong>Accusative prepositions:</strong> f√ºr, ohne, durch, gegen, um</p>
            <p><strong>Dative prepositions:</strong> mit, nach, bei, seit, von, zu</p>
            <div class="divider"></div>
            <p><strong>Two-way:</strong> in, an, auf, unter, √ºber, vor, hinter, neben, zwischen</p>
            <ul>
              <li><strong>Dative</strong> = location (Wo?)</li>
              <li><strong>Accusative</strong> = direction (Wohin?)</li>
            </ul>
            <p><strong>Common contractions:</strong> in dem ‚Üí <strong>im</strong>, zu dem ‚Üí <strong>zum</strong>, zu der ‚Üí <strong>zur</strong>, an dem ‚Üí <strong>am</strong></p>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich gehe <strong>in den</strong> Park. (direction ‚Üí AKK)</p>
            <p>Ich bin <strong>im</strong> Park. (location ‚Üí DAT)</p>
            <p>Ich fahre <strong>mit dem</strong> Bus. (DAT)</p>
            <p>Das ist <strong>f√ºr den</strong> Lehrer. (AKK)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Classic error:</strong> mixing Wo/Wohin.</p>
            <p><strong>Fix:</strong> say the question out loud: ‚ÄúWo?‚Äù (DAT) vs ‚ÄúWohin?‚Äù (AKK).</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Choose DAT or AKK:</p>
            <ul>
              <li>Ich stelle die Tasche ____ Tisch. (on the table ‚Üí direction)</li>
              <li>Die Tasche liegt ____ Tisch. (on the table ‚Üí location)</li>
            </ul>
          </div>
        `
      },

      // Verb system: Perfekt / Pr√§teritum / Future / Modals
      {
        id: "perfekt",
        level: "A2",
        tags: ["Tenses","Verbs"],
        title: "Perfekt: haben/sein + Partizip II (spoken past)",
        summary: "Most common past tense in speech. Auxiliary in position 2; participle at the end.",
        deep: `
          <div class="box">
            <p><strong>Form:</strong> subject + (aux) haben/sein + ‚Ä¶ + Partizip II</p>
            <p><strong>Choosing haben vs sein:</strong></p>
            <ul>
              <li><strong>sein</strong> with movement/change: gehen, kommen, fahren, aufstehen, einschlafen, sterben, werden</li>
              <li><strong>haben</strong> for most other verbs</li>
            </ul>
            <p><strong>Participle formation (high impact):</strong></p>
            <ul>
              <li>regular: ge + stem + t ‚Üí gemacht</li>
              <li>irregular: often ge + stem + en ‚Üí gegangen</li>
              <li>inseparable prefixes (be-, ver-, er-, ent-, zer-, miss-) ‚Üí no ge-: besucht, verstanden</li>
              <li>separable prefixes ‚Üí prefix + ge-‚Ä¶: aufgemacht</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich <strong>habe</strong> Deutsch <strong>gelernt</strong>.</p>
            <p>Ich <strong>bin</strong> nach Hause <strong>gegangen</strong>.</p>
            <p>Wir <strong>haben</strong> ihn <strong>besucht</strong>. (inseparable ‚Üí no ge-)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Wrong:</strong> Ich bin das Buch gelesen.</p>
            <p><strong>Right:</strong> Ich <strong>habe</strong> das Buch <strong>gelesen</strong>. (no movement/change)</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Build Perfekt sentences:</p>
            <ul>
              <li>gestern / wir / (gehen) / ins Museum</li>
              <li>ich / (kaufen) / ein neues Handy</li>
              <li>sie / (besuchen) / ihre Freundin</li>
            </ul>
          </div>
        `
      },

      {
        id: "modals",
        level: "A2",
        tags: ["Word order","Verbs"],
        title: "Modal Verbs: word order + meaning differences",
        summary: "Modal in position 2, main verb at the end in infinitive. Nuance: m√ºssen vs sollen; d√ºrfen vs k√∂nnen.",
        deep: `
          <div class="box">
            <p><strong>Structure:</strong> conjugated modal (pos. 2) + ‚Ä¶ + infinitive at the end.</p>
            <p><strong>Meaning nuance:</strong></p>
            <ul>
              <li><strong>m√ºssen</strong> = obligation (I must)</li>
              <li><strong>sollen</strong> = external expectation/‚Äúsupposed to‚Äù (someone says/it‚Äôs recommended)</li>
              <li><strong>d√ºrfen</strong> = permission</li>
              <li><strong>k√∂nnen</strong> = ability/possibility</li>
              <li><strong>wollen</strong> = intention</li>
              <li><strong>m√∂chten</strong> = polite desire</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich <strong>muss</strong> heute <strong>arbeiten</strong>. (obligation)</p>
            <p>Ich <strong>soll</strong> mehr Wasser <strong>trinken</strong>. (recommendation)</p>
            <p>Du <strong>darfst</strong> hier nicht <strong>parken</strong>. (permission)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Common:</strong> forgetting infinitive at the end</p>
            <p><strong>Wrong:</strong> Ich muss arbeiten heute.</p>
            <p><strong>Better:</strong> Ich muss heute arbeiten.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Choose the best modal:</p>
            <ul>
              <li>Doctor‚Äôs advice: Du ____ mehr schlafen. (sollen)</li>
              <li>Permission: ____ ich hier sitzen? (d√ºrfen)</li>
              <li>Ability: Ich ____ gut schwimmen. (k√∂nnen)</li>
            </ul>
          </div>
        `
      },

      // Clause system: subordinate, relative, infinitive
      {
        id: "subordinate",
        level: "A2",
        tags: ["Clauses","Word order"],
        title: "Subordinate Clauses: weil / dass / wenn (verb-final)",
        summary: "Subordinating conjunction sends the conjugated verb to the end of its clause. Comma usually required.",
        deep: `
          <div class="box">
            <p><strong>Rule:</strong> In a subordinate clause, the conjugated verb goes to the end.</p>
            <p><strong>Common conjunctions:</strong> weil, dass, wenn, obwohl, w√§hrend, bevor, nachdem, falls</p>
            <p><strong>Two common patterns:</strong></p>
            <ul>
              <li>Main clause + comma + subordinate clause</li>
              <li>Subordinate clause + comma + main clause (then the main clause verb is still V2)</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich bleibe zu Hause, <strong>weil</strong> ich krank <strong>bin</strong>.</p>
            <p><strong>Wenn</strong> es regnet, <strong>bleibe</strong> ich zu Hause.</p>
            <p>Ich denke, <strong>dass</strong> er heute <strong>kommt</strong>.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Wrong:</strong> ‚Ä¶weil ich <em>bin</em> krank.</p>
            <p><strong>Right:</strong> ‚Ä¶weil ich krank <strong>bin</strong>.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Combine with <strong>weil</strong>:</p>
            <ul>
              <li>Ich komme nicht. Ich bin m√ºde.</li>
              <li>Wir bleiben hier. Es ist zu sp√§t.</li>
            </ul>
          </div>
        `
      },

      {
        id: "zu-infinitive",
        level: "B1",
        tags: ["Clauses","Verbs"],
        title: "Infinitive Clauses with zu (um‚Ä¶zu / ohne‚Ä¶zu / statt‚Ä¶zu)",
        summary: "Use zu-infinitives when the subject is the same or implied. ‚Äòdamit‚Äô is used when subjects differ.",
        deep: `
          <div class="box">
            <p><strong>Main use:</strong> compact structure instead of a full subordinate clause.</p>
            <p><strong>Core forms:</strong></p>
            <ul>
              <li><strong>zu</strong> + infinitive: Ich versuche, fr√ºher <strong>zu schlafen</strong>.</li>
              <li><strong>um ‚Ä¶ zu</strong> (purpose): Ich lerne, <strong>um</strong> die Pr√ºfung <strong>zu bestehen</strong>.</li>
              <li><strong>ohne ‚Ä¶ zu</strong> (without): Er ging, <strong>ohne</strong> etwas <strong>zu sagen</strong>.</li>
              <li><strong>statt ‚Ä¶ zu</strong> (instead of): Sie schaut Serien, <strong>statt</strong> zu lernen.</li>
            </ul>
            <p><strong>Subject check:</strong></p>
            <ul>
              <li>Same subject ‚Üí um‚Ä¶zu is usually possible.</li>
              <li>Different subject ‚Üí use <strong>damit</strong>: Ich lerne, <strong>damit</strong> meine Eltern stolz sind.</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich rufe an, <strong>um</strong> einen Termin <strong>zu machen</strong>.</p>
            <p>Er ging, <strong>ohne</strong> sich <strong>zu verabschieden</strong>.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Trap:</strong> wrong subject with um‚Ä¶zu</p>
            <p><strong>Better:</strong> Ich lerne, <strong>damit</strong> meine Eltern stolz <strong>sind</strong>. (different subject)</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Choose <strong>um‚Ä¶zu</strong> or <strong>damit</strong>:</p>
            <ul>
              <li>Ich spare Geld, ____ ich ein Auto kaufen kann.</li>
              <li>Ich spare Geld, ____ ein Auto zu kaufen.</li>
            </ul>
          </div>
        `
      },

      // B1/B2: Relative, Passive, Konjunktiv
      {
        id: "relative-clauses",
        level: "B1",
        tags: ["Clauses","Cases"],
        title: "Relative Clauses: case depends on function inside clause",
        summary: "Gender/number comes from the noun; case comes from the pronoun‚Äôs role in the relative clause.",
        deep: `
          <div class="box">
            <p><strong>Two-step method (works every time):</strong></p>
            <ol style="margin:.4rem 0 .2rem 1.25rem;">
              <li>Identify the noun you describe ‚Üí it gives gender/number.</li>
              <li>Ask what role the pronoun plays inside the clause: subject (Nom), object (Akk), indirect object (Dat), genitive (whose).</li>
            </ol>
            <p><strong>High-value forms:</strong> der (Nom), den (Akk masc), dem (Dat masc/neut), deren/dessen (Gen).</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Das ist der Mann, <strong>der</strong> hier wohnt. (subject)</p>
            <p>Das ist der Mann, <strong>den</strong> ich kenne. (object)</p>
            <p>Das ist der Mann, <strong>dem</strong> ich helfe. (dative)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Common:</strong> choosing case from the main clause</p>
            <p><strong>Fix:</strong> decide case only by the relative clause‚Äôs internal function.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Fill the relative pronoun:</p>
            <ul>
              <li>Das ist die Frau, ____ ich gestern gesehen habe.</li>
              <li>Das ist der Mann, ____ ich vertraue. (vertrauen = dative)</li>
            </ul>
          </div>
        `
      },

      {
        id: "passive-action-state",
        level: "B2",
        tags: ["Voice","Verbs"],
        title: "Passive: Action (werden) vs State (sein)",
        summary: "werden + Partizip II = action happening; sein + Partizip II = resulting state/condition.",
        deep: `
          <div class="box">
            <p><strong>Action passive (Vorgangspassiv):</strong> focuses on the process. Often add agent with <em>von</em>.</p>
            <p><strong>State passive (Zustandspassiv):</strong> describes the result/state.</p>
            <p><strong>Testing trick:</strong> If ‚Äúright now/gerade‚Äù fits, it‚Äôs likely action passive.</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Die T√ºr <strong>wird</strong> (gerade) <strong>ge√∂ffnet</strong>. (someone is opening it)</p>
            <p>Die T√ºr <strong>ist</strong> <strong>ge√∂ffnet</strong>. (it is open)</p>
            <p>Der Text <strong>wird</strong> <strong>korrigiert</strong>. ‚Üí Der Text <strong>ist</strong> <strong>korrigiert</strong>.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Trap:</strong> mixing meaning</p>
            <p>‚ÄúDie T√ºr ist ge√∂ffnet‚Äù ‚â† ‚ÄúThe door is being opened‚Äù. It means ‚Äúis open‚Äù.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Choose werden or sein:</p>
            <ul>
              <li>Das Essen ____ gekocht. (state: it‚Äôs already cooked)</li>
              <li>Das Essen ____ gerade gekocht. (process now)</li>
            </ul>
          </div>
        `
      },

      {
        id: "konjunktiv2",
        level: "B1",
        tags: ["Mood","Politeness"],
        title: "Konjunktiv II: politeness, wishes, unreal conditions",
        summary: "Use for polite requests, hypotheticals, and unreal past/present. Often: w√ºrde + infinitive.",
        deep: `
          <div class="box">
            <p><strong>3 key uses:</strong></p>
            <ul>
              <li><strong>Politeness:</strong> K√∂nnten Sie‚Ä¶? W√ºrden Sie‚Ä¶?</li>
              <li><strong>Unreal present:</strong> Wenn ich Zeit <em>h√§tte</em>, <em>w√ºrde</em> ich‚Ä¶</li>
              <li><strong>Unreal past:</strong> Wenn ich Zeit <em>gehabt h√§tte</em>, <em>w√§re</em> ich gekommen.</li>
            </ul>
            <p><strong>High-frequency forms:</strong> w√§re, h√§tte, k√∂nnte, m√ºsste, d√ºrfte, wollte.</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p><strong>K√∂nnten</strong> Sie mir helfen?</p>
            <p>Wenn ich Geld <strong>h√§tte</strong>, <strong>w√ºrde</strong> ich reisen.</p>
            <p>Wenn ich fr√ºher <strong>aufgestanden w√§re</strong>, <strong>h√§tte</strong> ich den Zug bekommen.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Common:</strong> mixing ‚Äúw√ºrde‚Äù everywhere</p>
            <p><strong>Better style:</strong> use real K II forms when they are common: w√§re/h√§tte/k√∂nnte/m√ºsste.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Finish the sentence:</p>
            <ul>
              <li>Wenn ich mehr Zeit ____, ____ ich jeden Tag Deutsch.</li>
              <li>____ Sie bitte das Fenster schlie√üen?</li>
            </ul>
          </div>
        `
      },

      // High-impact ‚Äúdeep‚Äù grammar: adjective endings, Konjunktiv I, verb clusters, style
      {
        id: "adjective-endings",
        level: "B2",
        tags: ["Adjectives","Cases","Articles"],
        title: "Adjective Endings: strong / weak / mixed (complete system)",
        summary: "Adjective endings encode case+gender+number. Choose pattern by article type: der-words (weak), ein-words (mixed), no article (strong).",
        deep: `
          <div class="box">
            <p><strong>Big picture:</strong> adjective endings carry information that the article may not fully show.</p>
            <ul>
              <li><strong>Weak</strong> (after <em>der-words</em>: der, dieser, jeder, welcher): adjective mostly -e/-en because the article shows the case.</li>
              <li><strong>Mixed</strong> (after <em>ein-words</em>: ein, mein, dein, kein): adjective supplies missing signals, especially nominative masc/neut and accusative neut.</li>
              <li><strong>Strong</strong> (no article): adjective carries full case signals.</li>
            </ul>

            <p><strong>High-value shortcut:</strong> in dative plural, adjective almost always ends in <strong>-en</strong>.</p>

            <div class="divider"></div>
            <p><strong>Mixed pattern (common):</strong></p>
            <table class="grammar-table">
              <tr><th></th><th>masc</th><th>fem</th><th>neut</th><th>plural</th></tr>
              <tr><td>Nom</td><td>ein gut<strong>er</strong></td><td>eine gut<strong>e</strong></td><td>ein gut<strong>es</strong></td><td>keine gut<strong>en</strong></td></tr>
              <tr><td>Akk</td><td>einen gut<strong>en</strong></td><td>eine gut<strong>e</strong></td><td>ein gut<strong>es</strong></td><td>keine gut<strong>en</strong></td></tr>
              <tr><td>Dat</td><td>einem gut<strong>en</strong></td><td>einer gut<strong>en</strong></td><td>einem gut<strong>en</strong></td><td>keinen gut<strong>en</strong></td></tr>
            </table>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Ich kaufe <strong>einen frischen</strong> Apfel. (Akk masc)</p>
            <p>Wir helfen <strong>einer netten</strong> Frau. (Dat fem)</p>
            <p>Das sind <strong>keine guten</strong> Ideen. (Nom plural)</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Trap:</strong> trying to memorize everything at once.</p>
            <p><strong>Smarter:</strong> master mixed (ein-words) + the dative rule first; then weak; then strong.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Add correct endings:</p>
            <ul>
              <li>Ich habe ein neu__ Auto.</li>
              <li>Wir sprechen mit einem freundlich__ Mann.</li>
              <li>Das sind die interessant__ B√ºcher.</li>
            </ul>
          </div>
        `
      },

      {
        id: "konjunktiv1",
        level: "B2",
        tags: ["Mood","Style"],
        title: "Konjunktiv I: reported speech (journalistic distance)",
        summary: "Used to report statements neutrally. Especially common with sein/haben/werden. If ambiguous, German often uses Konjunktiv II.",
        deep: `
          <div class="box">
            <p><strong>Purpose:</strong> signal ‚ÄúI‚Äôm reporting what someone said; I‚Äôm not confirming it.‚Äù</p>
            <p><strong>Most frequent forms:</strong></p>
            <ul>
              <li>sein ‚Üí er <strong>sei</strong>, sie <strong>sei</strong></li>
              <li>haben ‚Üí er <strong>habe</strong></li>
              <li>werden ‚Üí er <strong>werde</strong></li>
            </ul>
            <p><strong>Fallback strategies:</strong></p>
            <ul>
              <li>Konjunktiv II distancing: er <em>w√§re</em>, er <em>h√§tte</em>‚Ä¶</li>
              <li>Reporting verb + dass: Er sagte, dass‚Ä¶ (less ‚Äúnews style‚Äù)</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Er sagt, er <strong>sei</strong> krank.</p>
            <p>Sie behauptet, sie <strong>habe</strong> nichts gesehen.</p>
            <p>Der Sprecher erkl√§rte, die Lage <strong>werde</strong> sich verbessern.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Common:</strong> using Konjunktiv I in casual speech (sounds too formal).</p>
            <p>Use it mainly for news/reporting, academic writing, official summaries.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Rewrite into reported speech (Konj. I):</p>
            <ul>
              <li>Er: ‚ÄûIch bin m√ºde.‚Äú</li>
              <li>Sie: ‚ÄûIch habe keine Zeit.‚Äú</li>
            </ul>
          </div>
        `
      },

      {
        id: "verb-clusters",
        level: "C1",
        tags: ["Word order","Verbs"],
        title: "Verb clusters & double infinitive (Ersatzinfinitiv)",
        summary: "At C1 reading level, multiple verbs stack at the end. With modals in Perfekt, German often uses a double infinitive.",
        deep: `
          <div class="box">
            <p><strong>Verb cluster:</strong> several verbs appear at clause end (especially in subordinate clauses).</p>
            <p><strong>Double infinitive (Ersatzinfinitiv):</strong> with modals in Perfekt, the modal stays infinitive (not participle).</p>
            <ul>
              <li>Ich habe es nicht <strong>sagen k√∂nnen</strong>. (NOT: gesagt gekonnt)</li>
              <li>Er hat kommen <strong>m√ºssen</strong>.</li>
            </ul>
            <p><strong>Why it matters:</strong> it affects reading comprehension and correct advanced writing.</p>
          </div>
        `,
        examples: `
          <div class="box">
            <p>Er sagt, dass das Problem schnell <strong>gel√∂st werden muss</strong>.</p>
            <p>Sie meint, dass er das nicht <strong>gesehen haben kann</strong>.</p>
            <p>Ich habe fr√ºher gehen <strong>m√ºssen</strong>.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Trap:</strong> forcing English logic (one verb at a time).</p>
            <p><strong>Fix:</strong> train ‚Äúscan from the end‚Äù: in subordinate clauses, the final verbs tell you the tense/mood/voice.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Find the main meaning (what happened?) by reading from the end:</p>
            <ul>
              <li>‚Ä¶, dass er das Problem nicht h√§tte l√∂sen k√∂nnen.</li>
              <li>‚Ä¶, weil die Daten ausgewertet worden sein sollen.</li>
            </ul>
          </div>
        `
      },

      {
        id: "c1-style-nominalization",
        level: "C1",
        tags: ["Style","Writing"],
        title: "Nominalization (Nominalstil) and academic phrasing",
        summary: "German formal writing often turns verbs into nouns (Analyse der Entwicklung), increasing density and abstraction.",
        deep: `
          <div class="box">
            <p><strong>When it helps:</strong> formal reports, academic writing, official communication.</p>
            <p><strong>When it hurts:</strong> readability for learners; too many nouns can feel heavy.</p>
            <p><strong>Conversion patterns:</strong></p>
            <ul>
              <li>-ung: entwickeln ‚Üí Entwicklung</li>
              <li>-keit/-heit: m√∂glich ‚Üí M√∂glichkeit</li>
              <li>-tion: informieren ‚Üí Information</li>
              <li>support verbs: eine Entscheidung treffen, eine Untersuchung durchf√ºhren</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p><strong>Verb style:</strong> Wir analysieren, wie sich der Markt entwickelt.</p>
            <p><strong>Nominal style:</strong> Wir f√ºhren eine Analyse der Marktentwicklung durch.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Trap:</strong> nominalizing everything.</p>
            <p><strong>Better:</strong> nominalize only key concepts; keep supporting sentences verbal.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Turn into a more formal nominal style:</p>
            <ul>
              <li>Wir untersuchen, wie sich das Klima ver√§ndert.</li>
              <li>Wir entscheiden, ob das Projekt weiterl√§uft.</li>
            </ul>
          </div>
        `
      },

      {
        id: "c2-idiomatic-logic",
        level: "C2",
        tags: ["Patterns","Style"],
        title: "C2 Logic Templates (je‚Ä¶desto, es sei denn, geschweige denn, nicht nur‚Ä¶sondern auch)",
        summary: "Near-native fluency includes fixed logic templates that package argument structure and nuance.",
        deep: `
          <div class="box">
            <p><strong>Why C2 learners care:</strong> these forms replace ‚Äúsimple sentences + connectors‚Äù with native-like structure.</p>
            <ul>
              <li><strong>je ‚Ä¶ desto</strong> = correlation</li>
              <li><strong>es sei denn</strong> = exception</li>
              <li><strong>geschweige denn</strong> = ‚Äúlet alone‚Äù (stronger second point)</li>
              <li><strong>nicht nur ‚Ä¶ sondern auch</strong> = additive emphasis</li>
            </ul>
          </div>
        `,
        examples: `
          <div class="box">
            <p><strong>Je</strong> mehr ich lerne, <strong>desto</strong> besser werde ich.</p>
            <p>Ich komme, <strong>es sei denn</strong>, ich bin krank.</p>
            <p>Er hat es nicht erkl√§rt, <strong>geschweige denn</strong> bewiesen.</p>
            <p><strong>Nicht nur</strong> ist er p√ºnktlich, <strong>sondern</strong> auch zuverl√§ssig.</p>
          </div>
        `,
        mistakes: `
          <div class="box">
            <p><strong>Trap:</strong> using these without correct punctuation/structure.</p>
            <p><strong>Fix:</strong> learn them as complete templates and keep the commas.</p>
          </div>
        `,
        practice: `
          <div class="box">
            <p>Complete the template:</p>
            <ul>
              <li>Je ___ du √ºbst, desto ___ wirst du.</li>
              <li>Ich gehe mit, es sei denn, ___.</li>
            </ul>
          </div>
        `
      }
    ];

    // ---------- App Logic ----------
    (function(){
      const app = document.getElementById("app");
      const grid = document.getElementById("grid");
      const empty = document.getElementById("empty");
      const search = document.getElementById("search");
      const levelSelect = document.getElementById("levelSelect");
      const levelPills = document.getElementById("levelPills");
      const topicLinks = document.getElementById("topicLinks");
      const tagChips = document.getElementById("tagChips");

      const tExamples = document.getElementById("tExamples");
      const tDeep = document.getElementById("tDeep");
      const tMistakes = document.getElementById("tMistakes");
      const tPractice = document.getElementById("tPractice");
      const reset = document.getElementById("reset");

      const levels = ["A1","A2","B1","B2","C1","C2"];
      const levelRank = (lvl) => lvl === "ALL" ? -1 : levels.indexOf(lvl);

      let activeTag = "ALL";

      function escapeHtml(s){
        return String(s)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;");
      }

      function render(){
        // Render cards
        grid.innerHTML = TOPICS.map(t => {
          const tagBadges = t.tags.map(x => `<span class="tag">${escapeHtml(x)}</span>`).join("");
          return `
            <article class="topic-card topic"
              id="t-${t.id}"
              data-level="${t.level}"
              data-tags="${t.tags.map(x => x.toLowerCase()).join(" ")}"
              data-title="${escapeHtml(t.title).toLowerCase()}"
              data-summary="${escapeHtml(t.summary).toLowerCase()}">
              <div class="topic-head">
                <h4 class="topic-title">${escapeHtml(t.title)}</h4>
                <div class="topic-meta">
                  <span class="tag">${t.level}</span>
                  ${tagBadges}
                </div>
              </div>
              <p class="topic-summary">${escapeHtml(t.summary)}</p>

              <details class="deep">
                <summary>Deep explanation</summary>
                ${t.deep || `<div class="box"><p class="muted">No deep explanation yet.</p></div>`}
              </details>

              <details class="examples">
                <summary>Examples</summary>
                ${t.examples || `<div class="box"><p class="muted">No examples yet.</p></div>`}
              </details>

              <details class="mistakes">
                <summary>Common mistakes</summary>
                ${t.mistakes || `<div class="box"><p class="muted">No mistakes list yet.</p></div>`}
              </details>

              <details class="practice">
                <summary>Mini practice</summary>
                ${t.practice || `<div class="box"><p class="muted">No practice prompts yet.</p></div>`}
              </details>
            </article>
          `;
        }).join("");

        buildTags();
        applyFilters();
      }

      function buildTags(){
        const allTags = new Map();
        TOPICS.forEach(t => t.tags.forEach(tag => allTags.set(tag, (allTags.get(tag)||0)+1)));
        const sorted = Array.from(allTags.entries()).sort((a,b) => b[1]-a[1]).slice(0, 18);

        tagChips.innerHTML =
          `<span class="chip ${activeTag==="ALL"?"active":""}" data-tag="ALL">All tags</span>` +
          sorted.map(([tag,count]) =>
            `<span class="chip ${activeTag===tag?"active":""}" data-tag="${escapeHtml(tag)}">${escapeHtml(tag)} (${count})</span>`
          ).join("");
      }

      function setActivePill(level){
        Array.from(levelPills.querySelectorAll(".pill")).forEach(p => {
          p.classList.toggle("active", p.dataset.level === level);
        });
      }

      function setActiveChip(tag){
        activeTag = tag;
        Array.from(tagChips.querySelectorAll(".chip")).forEach(c => {
          c.classList.toggle("active", c.dataset.tag === tag);
        });
      }

      function buildSidebarLinks(visibleCards){
        topicLinks.innerHTML = visibleCards.length
          ? visibleCards.map(card => {
              const title = card.querySelector(".topic-title")?.textContent || "Topic";
              const lvl = card.dataset.level || "";
              return `<a href="#${card.id}"><span class="muted">${lvl}</span> ‚Äî ${escapeHtml(title)}</a>`;
            }).join("")
          : `<div class="muted" style="padding:.35rem .5rem;">No topics visible.</div>`;
      }

      function applyFilters(){
        const q = (search.value || "").trim().toLowerCase();
        const lvl = levelSelect.value;
        const minRank = levelRank(lvl);

        const cards = Array.from(document.querySelectorAll(".topic"));
        let shown = 0;

        const visible = [];

        cards.forEach(card => {
          const cLevel = card.dataset.level || "A1";
          const cRank = levelRank(cLevel);

          const hay = (card.dataset.title || "") + " " + (card.dataset.summary || "") + " " + (card.dataset.tags || "");
          const matchesSearch = q ? hay.includes(q) : true;
          const matchesLevel = (lvl === "ALL") ? true : (cRank >= minRank);
          const matchesTag = (activeTag === "ALL") ? true : (card.dataset.tags || "").includes(activeTag.toLowerCase());

          const show = matchesSearch && matchesLevel && matchesTag;
          card.hidden = !show;

          if(show){
            shown++;
            visible.push(card);
          }
        });

        empty.style.display = shown ? "none" : "block";
        buildSidebarLinks(visible);
      }

      // Events
      levelPills.addEventListener("click", (e) => {
        const pill = e.target.closest(".pill");
        if(!pill) return;
        const lvl = pill.dataset.level;
        levelSelect.value = lvl;
        setActivePill(lvl);
        applyFilters();
      });

      levelSelect.addEventListener("change", () => {
        setActivePill(levelSelect.value);
        applyFilters();
      });

      search.addEventListener("input", applyFilters);

      tagChips.addEventListener("click", (e) => {
        const chip = e.target.closest(".chip");
        if(!chip) return;
        setActiveChip(chip.dataset.tag);
        applyFilters();
      });

      tExamples.addEventListener("change", () => app.classList.toggle("hide-examples", tExamples.checked));
      tDeep.addEventListener("change", () => app.classList.toggle("hide-deep", tDeep.checked));
      tMistakes.addEventListener("change", () => app.classList.toggle("hide-mistakes", tMistakes.checked));
      tPractice.addEventListener("change", () => app.classList.toggle("hide-practice", tPractice.checked));

      reset.addEventListener("click", () => {
        search.value = "";
        levelSelect.value = "ALL";
        setActivePill("ALL");
        setActiveChip("ALL");
        tExamples.checked = false;
        tDeep.checked = false;
        tMistakes.checked = false;
        tPractice.checked = false;
        app.classList.remove("hide-examples","hide-deep","hide-mistakes","hide-practice");
        buildTags();
        applyFilters();
      });

      // Init
      render();
    })();
  </script>
  <script>
  const menuBtn = document.querySelector(".menu-btn");
  const drawer = document.querySelector(".drawer");
  const backdrop = document.querySelector(".drawer-backdrop");
  const closeBtn = document.querySelector(".drawer-close");

  function openMenu(){
    drawer.hidden = false;
    backdrop.hidden = false;
    menuBtn.setAttribute("aria-expanded", "true");
  }
  function closeMenu(){
    drawer.hidden = true;
    backdrop.hidden = true;
    menuBtn.setAttribute("aria-expanded", "false");
  }

  menuBtn?.addEventListener("click", openMenu);
  closeBtn?.addEventListener("click", closeMenu);
  backdrop?.addEventListener("click", closeMenu);
</script>

</body>
</html>
